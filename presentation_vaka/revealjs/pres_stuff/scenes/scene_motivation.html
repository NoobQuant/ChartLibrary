<!-- Source: https://bl.ocks.org/mbostock/3231298 -->

<!DOCTYPE html>
<meta charset="utf-8">

<body>

<!-- Basic utilities of AnimationLib-->
<script type="text/javascript" src="../../pres_stuff/basic_utils/basic_utils.js"></script> 

<!-- Math symbols-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_SVG">
</script>

<!-- d3-->
<script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>

<style>

    .line {
      fill: none;
    }
    
    .axisColored line{
      stroke: #FFFFFF;
    }
    
    .axisColored path{
      stroke: #FFFFFF;
    }
    
    .axisColored text{
      fill: #FFFFFF;
    }  
    
    
    </style>

<script>

///*
var width = 1920,
    height = 1080;

svg = d3.select("body").append("div").append("svg")
    .attr('viewBox','0 0 ' + width + ' ' + height)
    .attr('preserveAspectRatio','xMidYMid meet')
    .style("width", '98%')
    .style("height", '98%')
    .style("display", "block")
    .style("position", "absolute");


var _transitions = [],
    _inverse_transitions = [];



var tfParams = {
     pos: [[600,390]]
    ,id: "tf1"
    ,textAreaWidth: 500
    ,textAreaHeight: 300
	//,textRelXPos: 0
	,text: "dved $\\alpha$"
	//,scaleEase: "d3.easeBounce"
	,fontSize: 40
	,fontFamily: "Arial"
	,rectStroke: "none"
	,textColor: "rgba(228, 239, 233, 1.00)"
};


var labels = [
  ,{pos: [[1300, 450]], entpoint: [0,0], label: "$\\frac{\\partial V}{\\partial  t} + \\frac{1}{2} \\sigma^{2} S^{2} \\frac{\\partial^{2} V^{2}}{\\partial S^{2}} + r S \\frac{\\partial V}{\\partial S} - rV = 0$", id:"eq_bs"}
  ,{pos: [[300, 370]], entpoint: [0,0], label: "$Y = \\sqrt{\\rho} Z + \\sqrt{1-\\rho} \\ \\epsilon$", id:"eq_vasicek"}
  ,{pos: [[800, 950]], entpoint: [0,0], label: "$u^{´} (c_t) = \\beta \\ (1+r_{t+1}) \\ u^{´}(c_{t+1})$", id:"eq_euler"}
];                

mathvals = new MathSymbol(labels, relsize = 200);



// Calculate curves, will be used later
var xAxisValues = range(0,1500,10);

var linRegLineData = new Array(xAxisValues.length);
var sigmoidData = new Array(xAxisValues.length);
var yval = 0;
for (var j = 0; j < xAxisValues.length; j++){

  //var yval = (32/140) - (3/2800) * xAxisValues[j];
  var temp = Math.random() < 0.5 ? -1 : 1; 
	yval = yval + temp 
	linRegLineData[j] = [xAxisValues[j], yval];
};


// Draw axes
params = {
   "tickNo": [5, 7]  
  ,"xlabelRelativeSize": 200
  ,"tickLabelSize": 20
  ,"tickSizecc": 15
};
const plot = new SimplePlot(
                pos = [700,500]
                ,xrange = [0,450]
                ,yrange = [0,300]
							  ,xdomain = [0,1500], ydomain = [-20, 20]
                ,id = "plot1"
                ,params);


imgparams1 = 
  {
    path: "pics/eba.jpg"
    ,id: "pic_eba"
    ,pos: [180, 480]
    ,correctors: [550, 1400]
    ,relsize: [4,4]
  }
  img1 = new Image(imgparams1)

imgparams2 = 
  {
    path: "pics/excel.png"
    ,id: "pic_eba"
    ,pos: [1250, 600]
    ,correctors: [3700, 1800]
    ,relsize: [7,7]
  }
  img2 = new Image(imgparams2)


_transitions.push(
  () => {

          mathvals.Draw(0, duration = 1000,  type = 'movein')

          plot.DrawAxes(500, duration = 500);
          plot.DrawLine(linRegLineData, id = "linearline", delay = 900, strokewidth = 3);   

          img1.Draw(delay = 500, duration = 500);   
          img2.Draw(delay = 500, duration = 500);                           
        }
);
_inverse_transitions.push(
  () => {

          mathvals.Hide(0, 0)
          plot.Hide(0,0);       
          img1.Hide(0,0);
          img2.Hide(0,0);          
        }
);

addMathJax();

</script>

</body>
